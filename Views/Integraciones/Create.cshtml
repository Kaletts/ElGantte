@model ElGantte.Models.Integracione

@{
    ViewData["Title"] = "Create";
}

<link rel="stylesheet" href="~/css/tom-select.css" />

<div class="d-flex justify-content-center align-items-center min-vh-100">
    <div class="card shadow p-4 w-75">
        <div class="row g-3">
            <!-- Formulario -->
            <div class="col-md-7">
                <h2 class="mb-3">Crear nueva integración</h2>
                <form asp-action="Create">
                    <div asp-validation-summary="ModelOnly" class="text-danger mb-2"></div>

                    <div class="mb-3">
                        <label asp-for="ModeloTerminal" class="form-label"></label>
                        <select asp-for="ModeloTerminal" class="form-select" asp-items="ViewBag.ModelosTerminales"></select>
                        <span asp-validation-for="ModeloTerminal" class="text-danger"></span>
                    </div>

                    <div class="mb-3">
                        <label asp-for="SoftwareIntegrado" class="form-label"></label>
                        <select asp-for="SoftwareIntegrado" class="form-select" required>
                            <option value="APK">APK</option>
                            <option value="SOFT.CAJA + APK">SOFT.CAJA + APK</option>
                            <option value="SOFT.CAJA">SOFT.CAJA</option>
                            <option value="TNA">TNA</option>
                        </select>
                        <span asp-validation-for="SoftwareIntegrado" class="text-danger"></span>
                    </div>

                    <div class="mb-3">
                        <label asp-for="NombreSwapp" class="form-label"></label>
                        <input asp-for="NombreSwapp" class="form-control" required />
                        <span asp-validation-for="NombreSwapp" class="text-danger"></span>
                    </div>

                    <input type="hidden" asp-for="Certificado" value="false" />
                    <input type="hidden" asp-for="StandBy" value="false" />

                    <div class="mb-3">
                        <label asp-for="FechaInicio" class="form-label"></label>
                        <input asp-for="FechaInicio" class="form-control" required type="date" id="fechaInicio" />
                        <span asp-validation-for="FechaInicio" class="text-danger"></span>
                    </div>

                    <div class="mb-3">
                        <label asp-for="CasoSf" class="form-label"></label>
                        <input asp-for="CasoSf" class="form-control" required />
                        <span asp-validation-for="CasoSf" class="text-danger"></span>
                    </div>

                    <div class="mb-3">
                        <label asp-for="Status" class="form-label"></label>
                        <select asp-for="Status" class="form-select" asp-items="ViewBag.Status"></select>
                    </div>

                    <div class="mb-3">
                        <label asp-for="Solucion" class="form-label"></label>
                        <select asp-for="Solucion" class="form-select" asp-items="ViewBag.Solucion"></select>
                    </div>

                    <div class="mb-3">
                        <label asp-for="Partner" class="form-label"></label>
                        <select id="partnerSelect" name="Partner" class="form-select" asp-items="ViewBag.PartnerList" required>
                            <option value="">Selecciona un partner</option>
                        </select>
                    </div>

                    <div class="d-grid gap-2 mt-3">
                        <input type="submit" value="Crear" class="btn btn-success" />
                        <a asp-action="Index" class="btn btn-outline-primary">Volver al inicio</a>
                    </div>
                </form>
            </div>

            <!-- SVG decorativo -->
            <div class="col-md-5 d-flex justify-content-center align-items-center">
                <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg"
                     xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 512.003 512.003" xml:space="preserve" fill="#000000">
                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                <g id="SVGRepo_iconCarrier">
                <rect x="94.066" y="94.865" style="fill:#063e88;" width="323.872" height="417.138"></rect>
                <rect x="94.066" y="94.865" style="fill:#1a3099;" width="161.931" height="417.138"></rect>
                <rect x="127.771" y="201.457" style="fill:#52e6f8;" width="256.472" height="83.39"></rect>
                <g>
                <rect x="127.771" y="318.552" style="fill:#FFF1D8;" width="63.021" height="63.021"></rect>
                <rect x="224.496" y="318.552" style="fill:#FFF1D8;" width="63.021" height="63.021"></rect>
                <rect x="321.222" y="318.552" style="fill:#FFF1D8;" width="63.021" height="63.021"></rect>
                <rect x="127.771" y="415.277" style="fill:#FFF1D8;" width="63.021" height="63.021"></rect>
                <rect x="224.496" y="415.277" style="fill:#FFF1D8;" width="63.021" height="63.021"></rect>
                <rect x="321.222" y="415.277" style="fill:#FFF1D8;" width="63.021" height="63.021"></rect>
                        </g>
                <rect x="127.771" y="201.457" style="fill:#6FF7FF;" width="128.236" height="83.39"></rect>
                <polygon style="fill:#FEDFB5;" points="341.494,26.536 298.75,0 256.005,26.536 213.26,0 170.516,26.536 127.772,0 127.772,154.353 384.239,154.353 384.239,0 "></polygon>
                <polygon style="fill:#FFF1D8;" points="256.005,26.536 256.005,26.536 213.26,0 170.516,26.536 127.772,0 127.772,154.353 256.005,154.353 "></polygon>
                    </g>
                </svg>
            </div>
        </div>
    </div>
</div>

<script src="~/js/tom-select.complete.min.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        // Inicializar Tom-Select
        new TomSelect("#partnerSelect", {
            placeholder: "Buscar Partner...",
            create: false,
            allowEmptyOption: true
        });

        // Fecha inicio por defecto
        const now = new Date();
        const madridTime = new Date(now.toLocaleString("en-US", { timeZone: "Europe/Madrid" }));
        const day = String(madridTime.getDate()).padStart(2, '0');
        const month = String(madridTime.getMonth() + 1).padStart(2, '0');
        const year = madridTime.getFullYear();
        const formattedDate = `${year}-${month}-${day}`;
        document.getElementById("fechaInicio").value = formattedDate;
    });
</script>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}
